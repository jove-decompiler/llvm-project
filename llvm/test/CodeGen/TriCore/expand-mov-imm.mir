# RUN: llc -mtriple=tricore -run-pass=tricore-expand-pseudo -o - %s | FileCheck %s

name:           test_i32
alignment:       8
tracksRegLiveness: true
machineFunctionInfo: {}
body:             |
  bb.0:
  ; CHECK-LABEL: bb.0:

  ; CHECK-NEXT: MOVU_dc $d0, 32767
  ; CHECK-NEXT: ADDIH_ddc $d0, $d0, 65535, implicit-def $psw
    $d0 = MOVImmDataReg -32769

  ; CHECK-NEXT: MOV_dc $d1, -32768
    $d1 = MOVImmDataReg -32768

  ; CHECK-NEXT: MOV_dc $d2, 32767
    $d2 = MOVImmDataReg 32767

  ; CHECK-NEXT: MOVU_dc $d3, 32768
    $d3 = MOVImmDataReg 32768

  ; CHECK-NEXT: MOVU_dc $d4, 65535
    $d4 = MOVImmDataReg 65535

  ; CHECK-NEXT: MOVH_dc $d5, 1
    $d5 = MOVImmDataReg 65536

  ; CHECK-NEXT: MOVU_dc $d6, 1
  ; CHECK-NEXT: ADDIH_ddc $d6, $d6, 1, implicit-def $psw
    $d6 = MOVImmDataReg 65537

  ; CHECK-NEXT: MOV_dc $d7, 0
    $d7 = MOVImmDataReg 0

  ; CHECK-NEXT: MOVH_dc $d8, 3
  ; CHECK-NEXT: SH_ddc $d8, $d8, -1
    $d8 = MOVImmDataReg 98304

  ; CHECK-NEXT: MOVU_dc $d9, 65528
  ; CHECK-NEXT: SH_ddc $d9, $d9, 1
    $d9 = MOVImmDataReg 131056

  ; Edge case: Trailing Zeros: 0 Leading Zeros: 15
  ; CHECK-NEXT: MOVU_dc $d10, 65535
  ; CHECK-NEXT: ADDIH_ddc $d10, $d10, 1, implicit-def $psw
    $d10 = MOVImmDataReg 131071

  ; CHECK-NEXT: MOVH_dc $d11, 65535
  ; CHECK-NEXT: SH_ddc $d11, $d11, -4
    $d11 = MOVImmDataReg 268431360

  ; CHECK-NEXT: MOVU_dc $d12, 65535
  ; CHECK-NEXT: SH_ddc $d12, $d12, 1
    $d12 = MOVImmDataReg 131070

  ; CHECK-NEXT: MOV_dc $d13, -32768
    $d13 = MOVImmDataReg 4294934528
...

name:           test_i64
alignment:       8
tracksRegLiveness: true
machineFunctionInfo: {}
body:             |
  bb.0:
  ; CHECK-LABEL: bb.0:

  ; CHECK-NEXT: MOV_ec $e0, -32768
    $e0 = MOVImmExtDataReg -32768

  ; CHECK-NEXT: MOVU_dc $d2, 32767
  ; CHECK-NEXT: ADDIH_ddc $d2, $d2, 65535, implicit-def $psw
  ; CHECK-NEXT: MOV_dc $d3, -1
    $e2 = MOVImmExtDataReg -32769
...

name:           test_p0
alignment:       8
tracksRegLiveness: true
machineFunctionInfo: {}
body:             |
  bb.0:
  ; CHECK-LABEL: bb.0:

  ; CHECK-NEXT: MOVHA_ac $a0, 16
  ; CHECK-NEXT: LEA_aac $a0, $a0, 65535
    $a0 = MOVImmAddrReg 1048575

  ; Make sure we do not select MOVA_16_ac here, since that is the job of our
  ; compression backend
  ; CHECK-NEXT: LEA_ac $a1, 15
    $a1 = MOVImmAddrReg 15

  ; CHECK-NEXT: LEA_ac $a2, 16
    $a2 = MOVImmAddrReg 16
...
