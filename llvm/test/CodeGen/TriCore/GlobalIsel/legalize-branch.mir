# RUN: llc -O0 -mtriple=tricore -global-isel -run-pass=legalizer -verify-machineinstrs %s -o - | FileCheck %s

---
name:            test_conditional_branch_s1
registers:
  - { id: 0, class: _ }
  - { id: 1, class: _ }
body:             |
  ; CHECK-LABEL: name: test_conditional_branch_s1
  ; CHECK: [[COPY:%[0-9]+]]:_(s32) = COPY $d4
  ; CHECK: [[TRUNC:%[0-9]+]]:_(s1) = G_TRUNC [[COPY]](s32)
  ; CHECK: G_BRCOND [[TRUNC]](s1), %bb.1
  ; CHECK: G_BR %bb.0
  bb.0:
    successors: %bb.0, %bb.1
    %1(s32) = COPY $d4
    %0(s1) = G_TRUNC %1
    G_BRCOND %0(s1), %bb.1
    G_BR %bb.0

  bb.1:
...

---
name:            test_conditional_branch_s32
registers:
  - { id: 0, class: _ }
body:             |
  ; CHECK-LABEL: name: test_conditional_branch_s32
  ; CHECK: [[COPY:%[0-9]+]]:_(s32) = COPY $d4
  ; CHECK: G_BRCOND [[COPY]](s32), %bb.1
  ; CHECK: G_BR %bb.0
  bb.0:
    successors: %bb.0, %bb.1
    %0(s32) = COPY $d4
    G_BRCOND %0(s32), %bb.1
    G_BR %bb.0

  bb.1:
...

---
name:            test_indirect_branch
registers:
  - { id: 0, class: _ }
body:             |
  ; CHECK-LABEL: name: test_indirect_branch
  ; CHECK: [[COPY:%[0-9]+]]:_(p0) = COPY $a4
  ; CHECK: G_BRINDIRECT [[COPY]](p0)
  bb.0:
    successors: %bb.0, %bb.1
    %0(p0) = COPY $a4
    G_BRINDIRECT %0(p0)

  bb.1:
...
