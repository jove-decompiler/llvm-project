# RUN: llc -mtriple=tricore -run-pass=prologepilog -verify-machineinstrs %s -o -
# XFAIL: *

# This will fail as long we as we don't implement emitProlog/Epilogue because
# $a14 is not defined / declared as a live-in

--- |
  %struct.bar = type { i32, i32 }

  define dso_local void @test_frame_index_elimination() {
  entry:
    %ptr0 = alloca [65536 x i32], align 4
    %ptr1 = alloca [65536 x i32], align 4
    %ptr2 = alloca %struct.bar, align 4
    ret void
  }

...
---
name:            test_frame_index_elimination
legalized:       true
regBankSelected: true
selected:        true
tracksRegLiveness: true
stack:
  - { id: 0, name: ptr0, type: default, offset: 0, size: 262144, alignment: 4 }
  - { id: 1, name: ptr1, type: default, offset: 0, size: 262144, alignment: 4 }
  - { id: 2, name: ptr2, type: default, offset: 0, size: 8, alignment: 4 }
body:             |
  bb.0.entry:
    liveins: $d4
    $a2 = LEA_aac %stack.0.ptr0, 0
    $a3 = LEA_aac %stack.1.ptr1, 0
    $a4 = LEA_aac %stack.2.ptr2, 0
    STW_alcd %stack.0.ptr0, 0, $d4
    STW_alcd %stack.1.ptr1, 0, $d4
    STW_alcd %stack.2.ptr2, 0, killed $d4
    $d2 = LDW_dalc %stack.0.ptr0, 0
    $d3 = LDW_dalc %stack.1.ptr1, 0
    $d4 = LDW_dalc %stack.2.ptr2, 0

...
